<h2 mat-dialog-title>{{data.title}}</h2>
<form [formGroup]="form" (submit)="onSubmit()" >
  <div mat-dialog-content>
    <mat-form-field class="full-width">
      <input required matInput type="text" placeholder="Title" formControlName="title" (blur)="blur()">
      <mat-error *ngIf="displayMessage.title">{{ displayMessage.title }}</mat-error>
    </mat-form-field>

    <mat-form-field class="full-width">
      <input required matInput type="text" placeholder="Tagline" formControlName="tagline" (blur)="blur()">
      <mat-error *ngIf="displayMessage.tagline">{{ displayMessage.tagline }}</mat-error>
    </mat-form-field>

    <mat-form-field class="full-width">
      <input required matInput type="text" placeholder="Type" formControlName="type" (blur)="blur()">
      <mat-error *ngIf="displayMessage.type">{{ displayMessage.type }}</mat-error>
    </mat-form-field>

    <mat-form-field class="full-width">
      <mat-select required formControlName="category_id" placeholder="Category" (blur)="blur()">
        <mat-option *ngFor="let c of categories" [value]="c.id">
          {{c.name}}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="displayMessage.category_id">{{ displayMessage.category_id }}</mat-error>
    </mat-form-field>

    <mat-form-field class="full-width">
      <input matInput type="number" required placeholder="Fundraising Goal" formControlName="goal" (blur)="blur()">
      <mat-error *ngIf="displayMessage.goal">{{ displayMessage.goal }}</mat-error>
    </mat-form-field>

    <mat-form-field class="full-width">
      <input matInput type="date" placeholder="End Date" formControlName="end_date" (blur)="blur()">
      <mat-error *ngIf="displayMessage.end_date">{{displayMessage.end_date}}</mat-error>
    </mat-form-field>

    <mat-form-field class="full-width">
      <textarea matInput placeholder="Story" formControlName="story"></textarea>
      <mat-error *ngIf="displayMessage.story">{{displayMessage.story}}</mat-error>
    </mat-form-field>

    <fieldset>
      <legend class="w-auto">Campaign Location</legend>
      <div class="container">
        <mat-form-field class="full-width">
          <input required matInput type="text" placeholder="Region" formControlName="region" (blur)="blur()">
          <mat-error *ngIf="displayMessage.region">{{ displayMessage.region }}</mat-error>
        </mat-form-field>

        <mat-form-field class="full-width">
          <input required matInput type="text" placeholder="City" formControlName="city" (blur)="blur()">
          <mat-error *ngIf="displayMessage.city">{{ displayMessage.city }}</mat-error>
        </mat-form-field>
      </div>
    </fieldset>

    <div class="col-sm-12">
      <mat-label>Cover picture</mat-label>
      <input type="hidden" formControlName="cover_picture" required/>
      <p-fileUpload
        accept=".jpg,.jpeg"
        maxFileSize="2000000"
        fileLimit="1"
        invalidFileSizeMessageDetail="Maximum file size is 2Mb"
        showCancelButton
        showUploadButton
        (onSelect)="onPhotoSelect($event)"
        (onRemove)="onPhotoRemove()"
        [previewWidth]="100"
      >
        <!-- <ng-template pTemplate="toolbar">
          <img
            width="100px"
            height="100px"
            alt="Cover picture"
          />
          <mat-error *ngIf="form.controls.cover_picture.invalid">Cover picture is required.</mat-error>
        </ng-template> -->
      </p-fileUpload>
    </div>
  </div>
  <mat-dialog-actions align="end">
    <div class="button-row">
      <button mat-stroked-button
              color="primary"
              type="submit"
              [disabled]="!form.valid">
        <mat-icon>save</mat-icon>
        Save
      </button>
      &nbsp;
      <button mat-stroked-button
              type="button"
              color="accent"
              (click)="onCancel()">
        <mat-icon>remove_circle</mat-icon>
        Cancel
      </button>
    </div>
  </mat-dialog-actions>
</form>

